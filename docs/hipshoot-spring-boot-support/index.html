<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2017-07-07
 | Rendered using Hippo Forge Maven Skin 1.04.00 based on Apache Maven Fluido Skin
-->
<!--[if lt IE 7]><html id="ie6" xmlns="http://www.w3.org/1999/xhtml"  xml:lang="en" lang="en"><![endif]-->
<!--[if IE 7]><html id="ie7" xmlns="http://www.w3.org/1999/xhtml"  xml:lang="en" lang="en"><![endif]-->
<!--[if IE 8]><html id="ie8" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><![endif]-->
<!--[if IE 9]><html id="ie9" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><![endif]-->
<!--[if !IE]>--><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><!--<![endif]-->

<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
                    <meta name="Date-Revision-yyyymmdd" content="20170707"/>
                <meta http-equiv="Content-Language" content="en"/>
        <title>hipshoot &#x2013; hipshoot Spring Boot Support</title>
    <link rel="stylesheet" href="../css/forge-maven-skin-syntaxhighlighter-1.04.00.min.css"/>
    <link rel="stylesheet" href="../css/forge-maven-skin-1.04.00.min.css"/>
    <link rel="stylesheet" href="../css/site.css"/>
    <link rel="stylesheet" href="../css/print.css" media="print"/>

        
    <script type="text/javascript" src="../js/forge-maven-skin-syntaxhighlighter-1.04.00.min.js"></script>
    <script type="text/javascript" src="../js/forge-maven-skin-1.04.00.min.js"></script>

    
            </head>
    <body>

        
        
        
                
        
        
    <a href="http://github.com/onehippo-forge/hipshoot">
        <img style="position: absolute; top: 0; left: 0; border: 0; z-index: 10000;"
             src="https://s3.amazonaws.com/github/ribbons/forkme_left_red_aa0000.png"
             alt="Fork me on GitHub">
    </a>
    
    
                        
    <div class="container-fluid">
        <div class="row-fluid">
            <div id="header">
                <div id="logo">
                    <a href="http://www.onehippo.com">
                        <img src="../images/hipposkin/hippo-logo.png" alt="Hippo Logo" />
                    </a>
                </div>

                <h1>
                                            hipshoot
                    
                </h1>
                <div class="clearfix"></div>
            </div>
        </div>

        <div class="row-fluid">
            <div id="breadcrumbs" class="clearfix">
                <ul class="breadcrumb">
                                
                                        
                            <li id="publishDate">Last Published: 2017-07-07</li>
                                                                                                                                                </ul>

                <div class="links">
                    <a href="https://www.onehippo.com">Onehippo.com</a>
                    <a href="https://www.onehippo.org">Onehippo.org</a>
                </div>
            </div>
        </div>



            
    <div class="row-fluid">
        <div id="leftColumn" class="span3">
            <div class="well sidebar-nav">
                <ul class="nav nav-list">
                                        <li class="nav-header">Main</li>
                                                           
        <li>
    
                                                <a href="../index.html" title="Welcome">
                    <i class="none"></i>
                Welcome</a>
                    </li>
                                                                                                                                                       
        <li class="active">
    
                        <a href="#"><i class="icon-chevron-down"></i>Spring Boot Support</a>
                                    <ul class="nav nav-list">
                                                          
        <li>
    
                                                <a href="../hipshoot-spring-boot-support/install.html" title="Installation">
                    <i class="none"></i>
                Installation</a>
                    </li>
                                              </ul>
            </li>
                               
        <li>
    
                                                <a href="../apidocs/index.html" title="Javadoc (latest)">
                    <i class="none"></i>
                Javadoc (latest)</a>
                    </li>
                               
        <li>
    
                                                <a href="../release-notes.html" title="Release Notes">
                    <i class="none"></i>
                Release Notes</a>
                    </li>
                                                            <li class="nav-header">Autogenerated Docs</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
        <li>
    
                                                <a href="../project-info.html" title="Project Information">
                    <i class="icon-chevron-right"></i>
                Project Information</a>
                                </li>
                                                                                                                                                                                                                                                                                                                   
        <li>
    
                                                <a href="../project-reports.html" title="Project Reports">
                    <i class="icon-chevron-right"></i>
                Project Reports</a>
                                </li>
                        </ul>

                
                <hr class="divider"/>

                <div id="poweredBy">
                                            <div class="clear"></div>
                                            <div class="clear"></div>
                                            <div class="clear"></div>
                                                <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
            <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png"/>
        </a>
                            </div>
            </div>
        </div>
    
        
        <div id="bodyColumn"  class="span9" >
                                
            <!-- Copyright 2016 Hippo

    Licensed under the Apache License, Version 2.0 (the  "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS"
    BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License. -->
  
    <div class="section">
<h2><a name="hipshoot_Spring_Boot_Support"></a>hipshoot Spring Boot Support</h2>
      
<div class="section">
<h3><a name="Introduction"></a>Introduction</h3>
        
<p>
          This library provides the following components to support or extend
          <a class="externalLink" href="https://projects.spring.io/spring-boot/">Spring Boot Framework</a>.
        </p>
        
<table border="0" class="table table-striped">
          
<tr class="a">
            
<th>Component</th>
            
<th>Description</th>
          </tr>
          
<tr class="b">
            
<td><a href="../apidocs/org/onehippo/forge/hipshoot/spring/boot/support/AppsDeployingTomcatEmbeddedServletContainerFactory.html">AppsDeployingTomcatEmbeddedServletContainerFactory</a></td>
            
<td>
              
<p>
                An extension of <a class="externalLink" href="http://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/context/embedded/tomcat/TomcatEmbeddedServletContainerFactory.html">TomcatEmbeddedServletContainerFactory</a>
                to be able to deploy additional WARs packaged at <tt>classpath:META-INF/hipshoot/embedded-catalina/webapps/</tt>.
              </p>
              
<p>
                If an environment property, <tt>hipshoot.embedded.catalina.wars</tt>, is provided with a comma separated
                string for the war file names (e.g, <tt>hipshoot.embedded.catalina.wars=&quot;site.war, cms.war&quot;</tt>), this
                will look up those war file resources under <tt>classpath:META-INF/hipshoot/embedded-catalina/webapps/</tt>,
                extract the war file resources to a local file system directory designated as local embedded tomcat webapps
                directory by another environment property, <tt>hipshoot.embedded.catalina.appBase</tt>, and add each war
                as web application context during the startup.
              </p>
              
<p>
                Please see <a href="../apidocs/org/onehippo/forge/hipshoot/spring/boot/support/config/embedded/CatalinaConfiguration.html">CatalinaConfiguration</a>
                for a full list of the available configuration properties.
              </p>
            </td>
          </tr>
          
<tr class="a">
            
<td><a href="../apidocs/org/onehippo/forge/hipshoot/spring/boot/support/servlet/DeferredInitDelegatingServlet.html">DeferredInitDelegatingServlet</a></td>
            
<td>
              
<p>
                Delegating Servlet that defers the initialization of the delegate servlet and delegates calls to the delegate servlet
                specified in the init parameter, <tt>DeferredInitDelegatingServlet.delegateServletClass</tt>.
              </p>
              
<p>
                This delegating servlet with 'deferring initialization' feature can be useful if you want to start
                a web application fast enough without waiting for a servlet initialization to complete.
                For example, when you deploy spring boot based web application(s) onto a cloud based platform,
                you don't have to worry about the timeout issue (e.g, 60 seconds by default somewhere) due to a long
                time initializing servlet with this class.
                This servlet class will pass the servlet initialization phase fast because the real initialization
                of the delegate servlet will be deferred and done asynchronously so that the servlet container may start all
                the other web applications faster without having to wait for the delegate servlet to complete the initialization phase.
              </p>
              
<p>
                Please see <a href="../apidocs/org/onehippo/forge/hipshoot/spring/boot/support/servlet/DeferredInitDelegatingServlet.html">DeferredInitDelegatingServlet</a>
                for usages and details.
              </p>
            </td>
          </tr>
        </table>
      </div>
      
<div class="section">
<h3><a name="About_AppsDeployingTomcatEmbeddedServletContainerFactory"></a>About AppsDeployingTomcatEmbeddedServletContainerFactory</h3>
        
<p>
          By default, <a class="externalLink" href="http://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/context/embedded/tomcat/TomcatEmbeddedServletContainerFactory.html">TomcatEmbeddedServletContainerFactory</a>
          does not provide some options to customize the embedded Tomcat server.
          For example, it doesn't allow to deploy additional web applications. It starts up only with single web applicaiton, by default.
          You are supposed to code somethings to customize the embedded Tomcat server manually in many cases.
          This might be okay in simple applications, but not convenient for multi-wars-based application such as Hippo CMS
          in which a content delivery application (e.g, <tt>site.war</tt>) and a content authoring application (e.g, <tt>cms.war</tt>)
          are deployed in most cases.
        </p>
        
<p>
          <a href="../apidocs/org/onehippo/forge/hipshoot/spring/boot/support/AppsDeployingTomcatEmbeddedServletContainerFactory.html">AppsDeployingTomcatEmbeddedServletContainerFactory</a>
          extends <a class="externalLink" href="http://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/context/embedded/tomcat/TomcatEmbeddedServletContainerFactory.html">TomcatEmbeddedServletContainerFactory</a>
          to customize the embedded Tomcat server by following the recommendation in Spring Boot online documentation:
          <a class="externalLink" href="http://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-developing-web-applications.html#boot-features-customizing-configurableembeddedservletcontainerfactory-directly">Customizing ConfigurableEmbeddedServletContainer directly</a>.
        </p>
      </div>
      
<div class="section">
<h3><a name="How_to_use_AppsDeployingTomcatEmbeddedServletContainerFactory"></a>How to use AppsDeployingTomcatEmbeddedServletContainerFactory</h3>
        
<p>
          Here's a simple Spring Boot Application class example:
        </p>
        
<div class="brush: java">
        
<div class="source"><pre class="prettyprint linenums">
@Configuration
@SpringBootApplication
// To auto-scan org.onehippo.forge.hipshoot.spring.boot.support.config.embedded.CatalinaConfiguration bean
// that reads all the configuration properties (from application.yaml or application.properties for example).
@ComponentScan(basePackages = { &quot;org.onehippo.forge.hipshoot.spring.boot.support.config.embedded&quot; })
public class Application {

    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }

    /**
     * Embedded tomcat configuration to pass to AppsDeployingTomcatEmbeddedServletContainerFactory
     */
    @Autowired
    private CatalinaConfiguration catalinaConfiguration;

    @Bean
    public EmbeddedServletContainerFactory servletContainerFactory() {
        // Instead of TomcatEmbeddedServletContainerFactory, return an AppsDeployingTomcatEmbeddedServletContainerFactory here.
        return new AppsDeployingTomcatEmbeddedServletContainerFactory(catalinaConfiguration);
    }
}
        </pre></div>
        </div>
        
<p>
          The <tt>#servletContainerFactory()</tt> method simply follows the customization example explained in the section,
          <a class="externalLink" href="http://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-developing-web-applications.html#boot-features-customizing-configurableembeddedservletcontainerfactory-directly">Customizing ConfigurableEmbeddedServletContainer directly</a>.
        </p>
        
<p>
          Now, <tt>AppsDeployingTomcatEmbeddedServletContainerFactory</tt> will read all the configuration properties
          under <tt>hipshoot.embedded.catalina</tt> prefix (see the example configuration below),
          and do some extra work such as deploying additional wars as separate contexts,
          enabling JNDI naming, registering JNDI resources, etc.
        </p>
        
<div class="brush: javascript">
        
<div class="source"><pre class="prettyprint linenums">
# spring-boot-deploy/src/main/resources/application.yaml

logging:
    level:
        root: 'WARN'
        org.springframework.boot: 'INFO'
        org.onehippo.forge.hipshoot.spring.boot.support: 'INFO'
        org.hippoecm.hst.core.container.DiagnosticReportingValve: 'INFO'
        freemarker.servlet: 'FATAL'
        org.apache.wicket.Localizer: 'ERROR'
        org.hippoecm.repository.jackrabbit.persistence: 'INFO'
        org.hippoecm.repository.updater: 'INFO'
        org.apache.jackrabbit.core.persistence.bundle: 'INFO'
        org.apache.jackrabbit.core.state: 'ERROR'
        org.apache.jackrabbit.core.ItemManager: 'ERROR'
        org.apache.jackrabbit.core.persistence.bundle.util.LRUNodeIdCache: 'ERROR'
        com.github.woonsanko.examples.hippoboot.springboot: 'INFO'

server:
    tomcat:
        basedir: 'target/embedded-tomcat'

hipshoot:
    embedded:
        catalina:
            persistSession: 'false'
            appBase: '${server.tomcat.basedir}/webapps'
            wars: 'cms.war, site.war'
            server:
                defaultContext:
                    resources:
                        cachingAllowed: 'true'
                        cacheMaxSize: '40960'
                    environments:
                        - type: 'java.lang.String'
                          name: &quot;foo&quot;
                          value: &quot;bar&quot;
                    parameters:
                        - name: 'repository-address'
                          value: 'rmi://127.0.0.1:1099/hipporepository'
                          override: 'false'
                        - name: 'repository-directory'
                          value: 'storage'
                          override: 'false'
                    namingResources:
                        - name: 'mail/Session'
                          auth: 'Container'
                          type: 'javax.mail.Session'
                          propertiesString: 'mail.smtp.host=localhost, mail.smtp.port=2525'
                        - name: 'jdbc/repositoryDS'
                          auth: 'Container'
                          type: 'javax.sql.DataSource'
                          properties:
                              driverClassName: 'org.hsqldb.jdbc.JDBCDriver'
                              url: 'jdbc:hsqldb:mem:mymemdb'
                              username: 'SA'
                              password: ''
                              initialSize: '2'
                              maxTotal: '20'
                              maxIdle: '10'
                              minIdle: '2'
                              maxWaitMillis: '10000'
        </pre></div>
        </div>
      </div>
      
<div class="section">
<h3><a name="Deploying_Additional_WARs_packages_in_the_single_executable_JAR"></a>Deploying Additional WARs packages in the single executable JAR</h3>
        
<p>
          <tt>AppsDeployingTomcatEmbeddedServletContainerFactory</tt> reads <tt>hipshoot.embedded.catalina.wars</tt>
          configuration property. And, if the property has a comma separated war file resource names
          (e.g, <tt>&quot;site.war, cms.war&quot;</tt>), then it copies each war file resource from the single executable JAR file
          (under <tt>classpath:META-INF/hipshoot/embedded-catalina/webapps/</tt>)
          by using <tt>Thread.currentThread().getContextClassloader().getResourceAsStream(String)</tt>
          in order to deploy it additionally on startup.
          e.g, <tt>Thread.currentThread().getContextClassloader().getResourceAsStream(&quot;META-INF/hipshoot/embedded-catalina/webapps/cms.war&quot;)</tt>.
        </p>
      </div>
      
<div class="section">
<h3><a name="Packaging_Additional_WARs_packages_in_the_single_executable_JAR"></a>Packaging Additional WARs packages in the single executable JAR</h3>
        
<p>
          Let's suppose you have a normal Hippo project containing <tt>site</tt> and <tt>cms</tt> war modules.
          Each maven submodule will create a war file under the <tt>target</tt> folder.
        </p>
        
<p>
          To wrap this Hippo project into a Spring Boot application, you can do the following as an example:
        </p>
        
<ol style="list-style-type: decimal">
          
<li>Add a submodule, <tt>spring-boot-deploy</tt>, under the root.</li>
          
<li>So, this submodule will inherit Hippo CMS Release parent pom basically.</li>
          
<li>Now, create a pom.xml in <tt>spring-boot-deploy</tt> module, setting parent to the root pom.</li>
          
<li>
            Add Spring Boot Dependencies in <tt>spring-boot-deploy</tt> module as <tt>import</tt> scope.
            (ref: <a class="externalLink" href="http://docs.spring.io/spring-boot/docs/current/reference/html/using-boot-build-systems.html#using-boot-maven-without-a-parent">Using Spring Boot without the parent POM</a>)
          </li>
          
<li>
            Package both <tt>site.war</tt> and <tt>cms.war</tt> into the jar output before the Spring Boot Repackaging task.
            For example, we can execute <tt>maven-resources-plugin:copy-resources</tt> plugin in <tt>prepare-package</tt> Maven phase.
            (See the example below.)
          </li>
          
<li>
            Configure the Spring Boot Repackage Maven plugin.
            (You might want to configure <tt>ZIP</tt> layout in order to take advantage of the features of
            <a class="externalLink" href="http://docs.spring.io/spring-boot/docs/current/reference/html/executable-jar.html#executable-jar-property-launcher-features">PropertiesLauncher</a>.)
          </li>
          
<li>
            Finally, you can execute the packaged single executable JAR file simply with <tt>java</tt> command,
            or you can even use a specific platform tool (e.g, Cloud Foundry <tt>cf</tt> commands).
          </li>
        </ol>
        
<p>
          Here's an example <tt>pom.xml</tt> of <tt>spring-boot-deploy</tt> submodule explained above:
        </p>
        
<div class="brush: xml">
        
<div class="source"><pre class="prettyprint linenums">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot; xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;

  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

  &lt;parent&gt;
    &lt;groupId&gt;org.example&lt;/groupId&gt;
    &lt;artifactId&gt;myhippoproject&lt;/artifactId&gt;
    &lt;version&gt;0.1.0-SNAPSHOT&lt;/version&gt;
  &lt;/parent&gt;

  &lt;artifactId&gt;myhippoproject-spring-boot-deploy&lt;/artifactId&gt;
  &lt;packaging&gt;jar&lt;/packaging&gt;
  &lt;name&gt;My Hippo Project Spring Boot Deploy&lt;/name&gt;
  &lt;description&gt;My Hippo Project Spring Boot Deploy&lt;/description&gt;

  &lt;properties&gt;
    &lt;java.version&gt;1.8&lt;/java.version&gt;
    &lt;spring-boot.version&gt;1.4.2.RELEASE&lt;/spring-boot.version&gt;
    &lt;tomcat.version&gt;8.5.6&lt;/tomcat.version&gt;
    &lt;forge.hipshoot.version&gt;0.1.0&lt;/forge.hipshoot.version&gt;
  &lt;/properties&gt;

  &lt;dependencyManagement&gt;

    &lt;dependencies&gt;

      &lt;!-- Import dependency management from Spring Boot --&gt;
      &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;
        &lt;version&gt;${spring-boot.version}&lt;/version&gt;
        &lt;type&gt;pom&lt;/type&gt;
        &lt;scope&gt;import&lt;/scope&gt;
      &lt;/dependency&gt;

    &lt;/dependencies&gt;

  &lt;/dependencyManagement&gt;

  &lt;dependencies&gt;

    &lt;!-- Let this application be a spring boot web application simply. --&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
    &lt;/dependency&gt;

    &lt;!-- To provide commons-logging API implementation as Spring depends on commons-logging API. --&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
      &lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;
      &lt;scope&gt;provided&lt;/scope&gt;
    &lt;/dependency&gt;

    &lt;!-- To enable Tomcat DBCP2 DataSource JNDI Resource. --&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;
      &lt;artifactId&gt;tomcat-dbcp&lt;/artifactId&gt;
      &lt;version&gt;${tomcat.version}&lt;/version&gt;
      &lt;scope&gt;provided&lt;/scope&gt;
    &lt;/dependency&gt;

    &lt;!-- Just for testing JNDI DataSource creation. --&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.hsqldb&lt;/groupId&gt;
      &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;
    &lt;/dependency&gt;

    &lt;!-- To use Spring Boot Extension components provided by hipshoot-spring-boot-support. --&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.onehippo.forge.hipshoot&lt;/groupId&gt;
      &lt;artifactId&gt;hipshoot-spring-boot-support&lt;/artifactId&gt;
      &lt;version&gt;${forge.hipshoot.version}&lt;/version&gt;
      &lt;scope&gt;provided&lt;/scope&gt;
    &lt;/dependency&gt;

    &lt;!-- For JSP/JSTL Support in the embedded tomcat. --&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;
      &lt;artifactId&gt;tomcat-embed-el&lt;/artifactId&gt;
      &lt;scope&gt;provided&lt;/scope&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;
      &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;
      &lt;scope&gt;provided&lt;/scope&gt;
    &lt;/dependency&gt;

  &lt;/dependencies&gt;

  &lt;build&gt;

    &lt;finalName&gt;myhippoproject-spring-boot-deploy&lt;/finalName&gt;

    &lt;plugins&gt;

      &lt;plugin&gt;
        &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;id&gt;copy-resources&lt;/id&gt;
            &lt;phase&gt;prepare-package&lt;/phase&gt;
            &lt;goals&gt;
              &lt;goal&gt;copy-resources&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;configuration&gt;
              &lt;outputDirectory&gt;${basedir}/target/classes/META-INF/hipshoot/embedded-catalina/webapps&lt;/outputDirectory&gt;
              &lt;resources&gt;
                &lt;resource&gt;
                  &lt;filtering&gt;false&lt;/filtering&gt;
                  &lt;directory&gt;${basedir}/../cms/target&lt;/directory&gt;
                  &lt;includes&gt;
                    &lt;include&gt;*.war&lt;/include&gt;
                  &lt;/includes&gt;
                &lt;/resource&gt;
                &lt;resource&gt;
                  &lt;filtering&gt;false&lt;/filtering&gt;
                  &lt;directory&gt;${basedir}/../site/target&lt;/directory&gt;
                  &lt;includes&gt;
                    &lt;include&gt;*.war&lt;/include&gt;
                  &lt;/includes&gt;
                &lt;/resource&gt;
              &lt;/resources&gt;
            &lt;/configuration&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
      &lt;/plugin&gt;

      &lt;plugin&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
        &lt;configuration&gt;
          &lt;layout&gt;ZIP&lt;/layout&gt;
          &lt;executable&gt;true&lt;/executable&gt;
        &lt;/configuration&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;goals&gt;
              &lt;goal&gt;repackage&lt;/goal&gt;
            &lt;/goals&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
      &lt;/plugin&gt;

    &lt;/plugins&gt;

  &lt;/build&gt;

&lt;/project&gt;
        </pre></div>
        </div>
      </div>
      
<div class="section">
<h3><a name="Building_and_Runing"></a>Building and Runing</h3>
        
<p>
          If you run <tt>mvn clean package</tt> in the project root folder,
          it will build and package all the WARs (e.g, <tt>site.war</tt> and <tt>cms.war</tt>).
          And, when it is building <tt>spring-boot-deploy</tt> submodule continously, it will add those war files
          into <tt>target/classes/META-INF/hipshoot/embedded-catalina/webapps/</tt> folder first.
          After building a normal JAR package file, the Spring Boot Maven plugin will repackage it to be self-executable.
        </p>
        
<p>
          So, you can execute the JAR like the following example:
        </p>
        
<div class="brush: bash">
        
<div class="source"><pre class="prettyprint linenums">
$ java \
    -Xms512m -Xmx1024m \
    -Drepo.path=&quot;storage&quot; \
    -jar target/myhippoproject-spring-boot-deploy.jar
        </pre></div>
        </div>
      </div>
      
<div class="section">
<h3><a name="Demo_Projects"></a>Demo Project(s)</h3>
        
<ul>
          
<li><a class="externalLink" href="https://github.com/woonsanko/hippo-on-spring-boot">https://github.com/woonsanko/hippo-on-spring-boot</a></li>
        </ul>
      </div>
    </div>
  

            </div>
        </div>
    </div>

    <hr/>

    <footer>
                <div class="container-fluid">
                <div class="row span12">Copyright &copy;                                                2017.
                        All Rights Reserved.            
                                        
            </div>

        
        
                </div>
    </footer>
</body>
</html>
